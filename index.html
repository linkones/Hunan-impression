<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title class="title">å°è±¡æ¹–å— - é¦–é¡µ</title>
    <link rel="stylesheet" href="css/index.css" />
    <script src="js/index.js"></script>
  </head>
  <body>
    <header>
      <h1>å°è±¡æ¹–å—</h1>
      <nav>
        <a href="index.html">é¦–é¡µ</a>
        <a href="memory.html">æ¹–æ¹˜è®°å¿†</a>
        <a href="scenery.html">æ½‡æ¹˜ç››æ™¯</a>
        <a href="food.html">æ¹˜å‘³äººé—´</a>
      </nav>
    </header>
    <div class="main-content">
      <section class="weather-widget">
        <h2>æ¹–å—å¤©æ°”æŸ¥è¯¢</h2>
        <input type="text" id="cityInput" placeholder="è¾“å…¥åŸå¸‚åï¼Œå¦‚ï¼šé•¿æ²™" />
        <button onclick="getWeather()">æŸ¥è¯¢</button>
        <div id="weatherResult"></div>
      </section>

      <script>
        function getWeather() {
          const city = document.getElementById("cityInput").value;
          const resultDiv = document.getElementById("weatherResult");

          if (!city) {
            resultDiv.innerHTML = `
            <div class="weather-error">
                <p>âš ï¸ è¯·è¾“å…¥åŸå¸‚å</p>
            </div>
        `;
            return;
          }

          // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
          resultDiv.innerHTML = `
        <div class="weather-loading">
            <div class="loading-spinner"></div>
            <p>æ­£åœ¨æŸ¥è¯¢ ${city} çš„å¤©æ°”...</p>
        </div>
    `;

          // è°ƒç”¨API
          fetch(
            `http://localhost:3000/api/weather?city=${encodeURIComponent(city)}`
          )
            .then((response) => response.json())
            .then((data) => {
              if (data.success) {
                resultDiv.innerHTML = `
                    <div class="weather-card">
                        <div class="weather-header">
                            <h3>${data.city} ${data.weatherIcon || "ğŸŒ¤ï¸"}</h3>
                            <div class="weather-temp">${data.temperature}</div>
                            <div class="weather-status">${data.weather}</div>
                        </div>
                        <div class="weather-details">
                            <div class="detail-row">
                                <span class="detail-label">ä½“æ„Ÿæ¸©åº¦</span>
                                <span class="detail-value">${
                                  data.feelsLike || "--"
                                }</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">æ¹¿åº¦</span>
                                <span class="detail-value">${
                                  data.humidity
                                }</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">é£åŠ›</span>
                                <span class="detail-value">${data.wind}</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">é£é€Ÿ</span>
                                <span class="detail-value">${
                                  data.windSpeed || "--"
                                }</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">æ°”å‹</span>
                                <span class="detail-value">${
                                  data.pressure || "--"
                                }</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">èƒ½è§åº¦</span>
                                <span class="detail-value">${
                                  data.visibility || "--"
                                }</span>
                            </div>
                        </div>
                        <div class="weather-footer">
                            <p>ğŸ• æ›´æ–°æ—¶é—´ï¼š${data.updateTime}</p>
                            <p>ğŸ”Œ æ•°æ®æºï¼š${data.source}</p>
                            ${
                              data.note
                                ? `<p class="note">ğŸ“ ${data.note}</p>`
                                : ""
                            }
                        </div>
                    </div>
                `;
              } else {
                resultDiv.innerHTML = `
                    <div class="weather-error">
                        <p>âŒ ${data.message || "æŸ¥è¯¢å¤±è´¥"}</p>
                        ${
                          data.availableCities
                            ? `<p>æ”¯æŒçš„åŸå¸‚ï¼š${data.availableCities.join(
                                ", "
                              )}</p>`
                            : ""
                        }
                    </div>
                `;
              }
            })
            .catch((error) => {
              console.error("Error:", error);
              resultDiv.innerHTML = `
                <div class="weather-error">
                    <p>âŒ ç½‘ç»œè¯·æ±‚å¤±è´¥</p>
                    <p>è¯·æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œ</p>
                    <p>é”™è¯¯ä¿¡æ¯ï¼š${error.message}</p>
                </div>
            `;
            });
        }
      </script>

      <section class="hero">
        <div class="hero-text">
          <h2>åƒå¹´æ¹–æ¹˜ Â· å±±æ°´äººæ–‡</h2>
          <p>ä½ è¦å†™æ¹–å—ï¼Œå°±ä¸èƒ½åªå†™æ¹–å—â€”â€”</p>
          <p>ä½ è¦å†™æ˜¥å›å¤§åœ°çš„å—å²³è¡¡å±±è¿ç»µèµ·ä¼ã€é«˜è€¸å…¥äº‘ï¼Œæ¢¦å¹»æƒ¹äººæ€œ</p>
          <p>è¦å†™å¤æ—¥é…·æš‘çš„æ´åº­æ¹–ç•”å¾®æ³¢æµ©æ¸ºã€ç»¿æ°´é•¿é’ï¼Œå‡‰é£æ‹‚å¿ƒå²—</p>
          <p>è¦å†™ç§‹é«˜æ°”çˆ½çš„æ©˜å­æ´²å¤´ä¸‡å±±çº¢éã€å±‚æ—å°½æŸ“ï¼Œäººåœ¨ç”»ä¸­æ¸¸</p>
          <p>è¦å†™å†¬æ—¥åˆé›ªçš„å²³éº“å±±å·…,å‡éœœæŒ‚é›ªã€æˆ´ç‰æŠ«é“¶ï¼Œçœ‹é“¶è£…ç´ è£¹......</p>
        </div>
      </section>
    </div>
    <section class="cards">
      <a href="memory.html" class="card">
        <div class="slider">
          <div class="slides">
            <img src="image/æ¹–æ¹˜è®°å¿†.jpg" class="slide" />
            <img src="image/æ¹–æ¹˜è®°å¿†2.jpg" class="slide" />
            <img src="image/æ¹–æ¹˜è®°å¿†3.jpg" class="slide" />
          </div>

          <div class="dots">
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
          </div>
        </div>

        <h3>æ¹–æ¹˜è®°å¿†</h3>
      </a>

      <a href="scenery.html" class="card">
        <div class="slider">
          <div class="slides">
            <img src="image/æ½‡æ¹˜ç››æ™¯.jpg" class="slide" />
            <img src="image/æ½‡æ¹˜ç››æ™¯2.jpg" class="slide" />
            <img src="image/æ½‡æ¹˜ç››æ™¯3.jpg" class="slide" />
          </div>

          <div class="dots">
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
          </div>
        </div>
        <h3>æ½‡æ¹˜ç››æ™¯</h3>
      </a>

      <a href="food.html" class="card">
        <div class="slider">
          <div class="slides">
            <img src="image/æ¹˜å‘³äººé—´.jpg" class="slide" />
            <img src="image/æ¹˜å‘³äººé—´2.jpg" class="slide" />
            <img src="image/æ¹˜å‘³è®°å¿†3.jpg" class="slide" />
          </div>

          <div class="dots">
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
          </div>
        </div>
        <h3>æ¹˜å‘³äººé—´</h3>
      </a>
    </section>
  </body>
</html>
